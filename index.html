<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zelix App</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#DC2626',
                        secondary: '#10B981',
                        dark: '#0c0a09',
                        panel: '#1c1917',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#DC2626">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" href="icon-192.png">
</head>
<body class="flex flex-col min-h-screen pb-10 bg-stone-100 text-stone-900 dark:bg-dark dark:text-stone-300">

    <!-- HEADER -->
    <div class="sticky top-0 z-40 bg-white/95 dark:bg-dark/95 backdrop-blur border-b border-stone-200 dark:border-stone-800 shadow-md">
        <div class="max-w-4xl mx-auto px-4 py-3">
            <div class="flex justify-between items-start mb-3">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <button onclick="UI.openSetupModal('system')" class="text-stone-400 hover:text-primary transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </button>
                        <button onclick="UI.openHelpModal()" class="text-stone-400 hover:text-primary transition-colors font-bold text-lg px-2" title="N√°povƒõda">?</button>
                        <span span id="app-version-label" class="text-xs font-black text-primary tracking-tighter uppercase">Zelix App</span>
                    </div>
                    <span id="user-greeting" class="text-[10px] font-bold text-stone-600 dark:text-stone-300 mt-0.5">...</span>
                </div>
                <div class="text-right">
                    <div id="live-time" class="text-xl font-mono font-bold leading-none text-stone-900 dark:text-white">--:--</div>
                    <div id="live-date" class="text-[10px] font-bold uppercase text-stone-500 dark:text-stone-400 mt-0.5">--.--.----</div>
                </div>
            </div>

            <div class="flex justify-between items-center mb-3">
                <div class="flex gap-2">
                    <button onclick="UI.openHistoryModal()" class="text-[10px] font-bold bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-300 border border-stone-300 dark:border-stone-700 px-3 py-1 rounded hover:text-white hover:bg-stone-700 transition-colors">üìñ LOG</button>
                    <button onclick="Logic.checkWorkoutEntry()" class="text-[10px] font-bold bg-primary text-white px-3 py-1 rounded hover:bg-red-700 shadow-md flex items-center gap-1 transition-transform active:scale-95">üèãÔ∏è GYM</button>
                    <button onclick="UI.openWeightModal()" class="text-[10px] font-bold bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-300 border border-stone-300 dark:border-stone-700 px-3 py-1 rounded hover:text-white hover:bg-stone-700 transition-colors">‚öñÔ∏è V√ÅHA</button>
                </div>
            </div>

            <div id="action-card" class="bg-white dark:bg-panel rounded-lg p-3 border-l-2 border-stone-300 dark:border-stone-600 flex justify-between items-center gap-3 shadow-sm transition-colors duration-300">
                <div class="flex-1 overflow-hidden">
                    <div class="flex items-center gap-2">
                        <span id="next-time" class="text-xs font-mono text-stone-500 bg-white dark:bg-stone-950 px-1 rounded shadow-inner">--:--</span>
                        <span id="next-label" class="text-[9px] font-bold text-stone-400 dark:text-stone-600 uppercase tracking-widest">N√ÅSLEDUJE</span>
                    </div>
                    <h2 id="next-title" class="text-sm sm:text-base font-bold text-stone-900 dark:text-white truncate leading-tight mt-1 uppercase">Naƒç√≠t√°m...</h2>
                </div>
                <div class="flex items-center gap-3">
                    <div id="countdown" class="font-mono text-lg sm:text-xl font-bold text-primary tracking-tighter">--:--</div>
                    <button id="btn-confirm" onclick="Logic.confirmAction()" class="bg-white dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 text-stone-900 dark:text-white text-xs font-bold py-2 px-3 rounded border border-stone-300 dark:border-stone-700 shadow-sm transition-all">‚úì</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="max-w-4xl mx-auto p-4 space-y-6 flex-grow w-full">
        <div class="flex justify-between items-center">
            <div class="flex gap-2">
                <div id="week-badge" class="text-[10px] font-mono leading-none text-stone-500 border border-stone-300 dark:border-stone-700 px-2 py-1 rounded bg-white dark:bg-stone-900">...</div>
                <div id="day-badge" class="text-[10px] font-mono leading-none text-stone-500 dark:text-stone-400 uppercase">...</div>
            </div>
            <button id="btn-force-rest" onclick="Logic.toggleForceRest()" class="text-[10px] font-bold bg-stone-200 dark:bg-stone-900 text-stone-600 dark:text-stone-400 border border-stone-300 dark:border-stone-700 px-2.5 py-1 rounded hover:text-primary transition-colors">üõå VOLNO</button>
        </div>

        <section>
            <div id="timeline-list" class="space-y-3 relative border-l border-stone-300 dark:border-stone-800 ml-2 pl-4"></div>
        </section>

        <section class="bg-white dark:bg-panel rounded-xl p-4 border border-stone-200 dark:border-stone-800 shadow-sm transition-colors duration-300">
             <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2">
                 <h4 class="text-[10px] text-stone-500 font-bold uppercase tracking-widest">Anal√Ωza V√Ωkonu</h4>
                 <select id="chart-select" onchange="UI.updateChart(this.value)" class="z-select !w-auto !py-1 text-xs font-bold"></select>
             </div>
             <div class="chart-container"><canvas id="progressChart"></canvas></div>
        </section>
    </main>

    <!-- MODALS PLACEHOLDERS -->
    <!-- Setup Modal -->
    <div id="setup-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[200] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none">
        <div class="w-11/12 max-w-2xl bg-white dark:bg-panel border border-stone-200 dark:border-stone-700 p-0 rounded-xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden">
            <div class="border-b border-stone-200 dark:border-stone-800 bg-stone-50 dark:bg-stone-900/50">
                <div class="p-4 text-center"><h2 class="text-xl font-black text-primary uppercase tracking-tighter">NASTAVEN√ç</h2></div>
                <div class="flex">
                    <div class="tab-btn active" onclick="UI.switchTab('system')" id="tab-btn-system">Syst√©m</div>
                    <div class="tab-btn" onclick="UI.switchTab('user')" id="tab-btn-user">U≈æivatel</div>
                    <div class="tab-btn" onclick="UI.switchTab('supps')" id="tab-btn-supps">Stack</div>
                    <div class="tab-btn" onclick="UI.switchTab('exercises')" id="tab-btn-exercises">Cviky</div>
                </div>
            </div>
            <div class="p-5 overflow-y-auto flex-grow space-y-6">
                <!-- System -->
                <div id="tab-content-system" class="space-y-6">
                    <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800">
                        <label class="text-[10px] font-bold block mb-2 uppercase opacity-60">Vzhled</label>
                        <div class="grid grid-cols-3 gap-1.5">
                            <button onclick="Data.setTheme('light')" class="py-2 rounded text-[10px] border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-800 font-bold" id="theme-light">LIGHT</button>
                            <button onclick="Data.setTheme('dark')" class="py-2 rounded text-[10px] border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-800 font-bold" id="theme-dark">DARK</button>
                            <button onclick="Data.setTheme('auto')" class="py-2 rounded text-[10px] border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-800 font-bold" id="theme-auto">AUTO</button>
                        </div>
                        <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800 mt-2">
                        <div class="flex justify-between items-center">
                            <label class="text-[10px] font-bold uppercase opacity-60">Ozn√°men√≠</label>
                            <button id="btn-notify-req" onclick="UI.requestNotifications()" class="text-[9px] font-bold bg-stone-200 dark:bg-stone-800 px-3 py-1 rounded hover:bg-primary hover:text-white transition-colors">POVOLIT üîî</button>
                            </div>
                        </div>
                    </div>
                    <div class="pt-2 border-t border-stone-200 dark:border-stone-800">
                        <div class="grid grid-cols-2 gap-2 mb-4">
                            <button onclick="Data.exportData()" class="py-2.5 bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-300 font-bold text-xs rounded border border-stone-300 dark:border-stone-700 uppercase">‚¨á Export</button>
                            <label class="py-2.5 bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-300 font-bold text-xs rounded border border-stone-300 dark:border-stone-700 uppercase text-center cursor-pointer">‚¨Ü Import <input type="file" class="hidden" onchange="Data.importData(this)"></label>
                        </div>
                        <button onclick="UI.openWipeModal()" class="w-full py-2 bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-500 font-bold text-xs rounded border border-red-200 dark:border-red-900 uppercase">Smazat Data</button>
                    </div>
                </div>
                <!-- User -->
                <div id="tab-content-user" class="hidden space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800"><label class="text-[10px] font-bold block mb-2 uppercase opacity-60">Jm√©no</label><input type="text" id="setup-name" class="z-input font-bold"></div>
                        <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800"><label class="text-[10px] font-bold block mb-2 uppercase opacity-60">Sport</label><input type="text" id="setup-sport" class="z-input font-bold"></div>
                    </div>
                    <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800 mt-4">
                    <label class="text-[10px] font-bold block mb-2 uppercase opacity-60">ƒåasy j√≠del</label>
                        <div class="grid grid-cols-3 gap-2">
                            <div>
                            <label class="text-[9px] font-bold text-stone-400 uppercase">Sn√≠danƒõ</label>
                        <input type="time" id="setup-time-breakfast" class="z-input text-center font-bold">
                    </div>
                    <div>
                    <label class="text-[9px] font-bold text-stone-400 uppercase">Obƒõd</label>
                    <input type="time" id="setup-time-lunch" class="z-input text-center font-bold">
                    </div>
                    <div>
                    <label class="text-[9px] font-bold text-stone-400 uppercase">Veƒçe≈ôe</label>
                        <input type="time" id="setup-time-dinner" class="z-input text-center font-bold">
                    </div>
                </div>
                    </div>
                    <div><h3 class="text-xs font-bold text-stone-500 uppercase mb-3 tracking-widest text-center border-b border-stone-200 dark:border-stone-800 pb-2">Rozvrh</h3><div class="space-y-2" id="setup-days-container"></div></div>
                </div>
                <!-- Supps -->
                <div id="tab-content-supps" class="hidden space-y-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold text-stone-500 uppercase">M≈Øj Stack</span>
                        <div class="flex items-center gap-2">
                            <span class="text-[9px] text-stone-500">Aktivn√≠</span>
                            <label class="relative cursor-pointer">
                                <input id="setup-supps-enabled" type="checkbox" class="sr-only" checked onchange="UI.toggleSuppInputs()">
                                <div class="w-8 h-4 bg-stone-300 dark:bg-stone-700 rounded-full"></div>
                                <div class="dot absolute w-4 h-4 bg-white rounded-full shadow"></div></div>
                        </label>
                    </div>
                    <div id="supp-stack-list" class="space-y-2 max-h-[300px] overflow-y-auto"></div>
                    <div id="supps-inputs" class="bg-stone-50 dark:bg-stone-900/50 p-3 rounded border border-stone-200 dark:border-stone-800 space-y-2 mt-4">
                        <div class="grid grid-cols-2 gap-2"><input type="text" id="new-supp-name" class="z-input" placeholder="N√°zev">
                            <input type="text" id="new-supp-dose" class="z-input" placeholder="D√°vka"></div>
                        <div class="grid grid-cols-2 gap-2"><select id="new-supp-timing" class="z-select">
                            <option value="morning">R√°no</option><option value="pre">P≈ôed tr√©ninkem</option>
                            <option value="intra">P≈ôi tr√©ninku</option><option value="post">Po tr√©ninku</option>
                            <option value="evening">Veƒçer</option></select><select id="new-supp-freq" class="z-select">
                                <option value="all">Ka≈æd√Ω den</option><option value="training">Jen tr√©nink</option>
                                <option value="rest">Jen volno</option>
                            </select>
                        </div>
                        <button onclick="UI.addSupplement()" class="w-full bg-stone-200 dark:bg-stone-800 text-stone-800 dark:text-white font-bold text-xs py-2 rounded uppercase border border-stone-300 dark:border-stone-700">P≈ôidat</button>
                    </div>
                </div>
                <!-- Exercises -->
                <div id="tab-content-exercises" class="hidden space-y-4">
                    <div class="bg-stone-50 dark:bg-stone-900 p-3 rounded border border-stone-200 dark:border-stone-800 mb-4 flex justify-between items-center">
        <div>
            <h4 class="text-[10px] font-bold uppercase opacity-60">Zmƒõna Re≈æimu</h4>
            <p class="text-[9px] text-stone-500">Zmƒõnil se ti rozvrh?</p>
        </div>
        <button onclick="UI.openRegenWizard()" class="bg-stone-200 dark:bg-stone-800 hover:bg-primary hover:text-white text-stone-800 dark:text-stone-300 font-bold text-[10px] py-2 px-3 rounded uppercase transition-colors border border-stone-300 dark:border-stone-700">‚ö° Nov√Ω Pl√°n</button>
    </div>
                    <div class="flex gap-2 mb-4"><select id="edit-ex-week" class="z-select" onchange="UI.renderExerciseEditor()"><option value="A">T√Ωden A</option><option value="B">T√Ωden B</option></select><select id="edit-ex-day" class="z-select" onchange="UI.renderExerciseEditor()"><option value="1">Pondƒõl√≠</option><option value="2">√öter√Ω</option><option value="3">St≈ôeda</option><option value="4">ƒåtvrtek</option><option value="5">P√°tek</option><option value="6">Sobota</option><option value="0">Nedƒõle</option></select></div>
                    <div id="exercises-list" class="space-y-2 bg-stone-50 dark:bg-stone-900 p-2 rounded border border-stone-200 dark:border-stone-800 max-h-[300px] overflow-y-auto"></div>
                    <div class="flex flex-col gap-2 pt-2">
    <div class="flex gap-2">
        <input type="text" id="new-ex-name" class="z-input flex-grow" placeholder="Nov√Ω cvik...">
        <button onclick="UI.addExercise()" class="bg-stone-200 dark:bg-stone-800 px-4 rounded font-bold text-xl hover:text-primary transition-colors">+</button>
    </div>
    <label class="flex items-center gap-2 cursor-pointer select-none self-start ml-1">
        <div class="relative">
            <input type="checkbox" id="new-ex-noweight" class="sr-only">
            <div class="w-4 h-4 border border-stone-400 rounded bg-white dark:bg-stone-900 box-block transition-colors"></div>
            <svg class="w-3 h-3 absolute top-0.5 left-0.5 text-white pointer-events-none hidden check-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="4"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <span class="text-[10px] font-bold text-stone-500 uppercase">Cvik bez z√°va≈æ√≠ (Calisthenics)</span>
    </label>
</div>
                </div>
            </div>
            <div class="p-4 border-t border-stone-200 dark:border-stone-800 bg-stone-50 dark:bg-panel flex gap-2">
                <button onclick="UI.closeSetupModal()" class="flex-1 py-3 bg-stone-200 dark:bg-stone-800 text-stone-800 dark:text-white font-bold rounded-lg text-xs uppercase transition-all">Zru≈°it</button>
                <button onclick="Data.saveSetup()" class="flex-1 py-3 bg-primary text-white font-bold rounded-lg text-xs uppercase shadow-lg active:scale-95">Ulo≈æit</button>
            </div>
        </div>
    </div>

    <!-- Gym Log Modal -->
    <div id="workout-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[100] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none">
        <div class="modal-container bg-white dark:bg-panel w-full md:w-11/12 md:max-w-lg mx-auto rounded-t-2xl md:rounded-xl shadow-2xl z-50 h-[92vh] md:max-h-[85vh] flex flex-col absolute bottom-0 md:relative border border-stone-200 dark:border-stone-700">
            <div class="p-4 border-b border-stone-200 dark:border-stone-800 flex justify-between items-center bg-stone-50 dark:bg-panel rounded-t-xl sticky top-0 z-20">
                <h2 id="modal-title" class="text-lg font-black text-primary uppercase">Gym Log</h2>
                <button onclick="UI.closeWorkoutModal()" class="text-stone-400 text-3xl px-2">&times;</button>
            </div>
            <div class="p-4 space-y-4 flex-grow overflow-y-auto" id="modal-exercises"></div>
            <div class="p-4 border-t border-stone-200 dark:border-stone-800 bg-stone-50 dark:bg-panel sticky bottom-0 z-20 pb-8 md:pb-4">
                <textarea id="workout-note" rows="2" class="w-full mb-3 p-2 text-xs rounded border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-900 text-stone-900 dark:text-stone-300 resize-none focus:outline-none focus:border-primary transition-colors" placeholder="Pozn√°mka k tr√©ninku (nap≈ô. √∫nava, nov√Ω pre-workout...)" oninput="Logic.saveWorkoutDraft()"></textarea>
                <button onclick="Logic.finishWorkout()" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3.5 rounded-lg uppercase tracking-widest shadow-xl transition-all active:scale-95">Ulo≈æit Tr√©nink</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[150] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none">
        <div class="w-11/12 max-w-xl bg-white dark:bg-panel border border-stone-200 dark:border-stone-700 rounded-xl shadow-2xl max-h-[85vh] flex flex-col overflow-hidden">
            <div class="p-4 border-b border-stone-200 dark:border-stone-800 flex justify-between items-center bg-stone-50 dark:bg-panel sticky top-0">
                <h2 class="text-lg font-black text-primary uppercase">Historie</h2>
                <button onclick="UI.closeHistoryModal()" class="text-stone-400 text-2xl px-2">&times;</button>
            </div>
            <div class="p-0 overflow-y-auto bg-stone-50 dark:bg-stone-900/50 flex-grow" id="history-content"></div>
        </div>
    </div>

    <!-- Entry Manager Modal -->
    <div id="entry-manager-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[250] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none">
        <div class="w-11/12 max-w-sm bg-white dark:bg-panel border border-stone-200 dark:border-stone-700 p-0 rounded-xl shadow-2xl overflow-hidden">
            <div class="p-4 border-b border-stone-200 dark:border-stone-800 bg-stone-50 dark:bg-stone-900/50"><h3 id="mgr-title" class="font-black text-stone-800 dark:text-white uppercase text-center">√öprava</h3><p id="mgr-subtitle" class="text-[10px] text-stone-500 text-center uppercase tracking-widest mt-1">...</p></div>
            <div class="p-5 space-y-4">
                <div class="grid grid-cols-3 gap-2"><div class="flex flex-col"><label class="text-[9px] font-bold text-stone-400 uppercase text-center">KG</label><input type="number" id="mgr-kg" class="z-input text-center font-bold"></div><div class="flex flex-col"><label class="text-[9px] font-bold text-stone-400 uppercase text-center">OPAK</label><input type="number" id="mgr-reps" class="z-input text-center font-bold"></div><div class="flex flex-col"><label class="text-[9px] font-bold text-stone-400 uppercase text-center">S√âRIE</label><input type="number" id="mgr-sets" class="z-input text-center font-bold"></div></div>
                <div class="flex gap-1" id="mgr-rpe-cont"><button onclick="UI.setMgrRPE('easy', this)" class="rpe-btn flex-1">EASY</button><button onclick="UI.setMgrRPE('medium', this)" class="rpe-btn flex-1">OK</button><button onclick="UI.setMgrRPE('hard', this)" class="rpe-btn flex-1">HARD</button></div>
                <div class="pt-4 border-t border-stone-200 dark:border-stone-800 space-y-2"><button onclick="Logic.saveEntryEdit()" class="w-full py-3 bg-primary hover:bg-red-700 text-white font-bold text-xs rounded uppercase shadow-lg">Ulo≈æit zmƒõny</button><div class="flex gap-2"><button onclick="Logic.deleteEntry()" class="flex-1 py-2 bg-stone-200 dark:bg-stone-800 hover:bg-red-100 dark:hover:bg-red-900/20 text-stone-600 dark:text-stone-400 hover:text-red-600 dark:hover:text-red-400 font-bold text-[10px] rounded uppercase border border-transparent hover:border-red-500 transition-colors">Smazat cvik</button><button onclick="UI.openSessionDeleteModal()" class="flex-1 py-2 bg-stone-200 dark:bg-stone-800 hover:bg-red-600 text-stone-600 dark:text-stone-400 hover:text-white font-bold text-[10px] rounded uppercase border border-transparent hover:border-red-600 transition-colors">Smazat tr√©nink</button></div></div>
            </div>
            <div class="p-3 bg-stone-100 dark:bg-stone-900 border-t border-stone-200 dark:border-stone-800"><button onclick="UI.closeEntryManager()" class="w-full py-2 text-xs font-bold text-stone-500 uppercase hover:text-stone-800 dark:hover:text-white">Zru≈°it</button></div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div id="help-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[300] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none">
        <div class="w-11/12 max-w-2xl bg-white dark:bg-panel border border-stone-200 dark:border-stone-700 rounded-xl shadow-2xl max-h-[85vh] flex flex-col overflow-hidden">
            <div class="p-4 border-b border-stone-200 dark:border-stone-800 flex justify-between items-center bg-stone-50 dark:bg-panel sticky top-0">
                <h2 class="text-lg font-black text-primary uppercase">Manu√°l</h2> <button onclick="UI.closeHelpModal()" class="text-stone-400 text-2xl px-2">&times;</button>
            </div>
            <div id="help-content" class="p-6 overflow-y-auto space-y-4 text-sm text-stone-600 dark:text-stone-300 leading-relaxed">
                Naƒç√≠t√°m...
            </div>
        </div>
    </div>
    
    <!-- Onboarding Modal -->
    <div id="onboarding-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[400] bg-white/95 dark:bg-stone-950/95 opacity-0 pointer-events-none transition-opacity duration-500 backdrop-blur-sm">
        <div class="w-11/12 max-w-md bg-white dark:bg-stone-900 border border-stone-200 dark:border-stone-800 p-0 rounded-2xl text-center shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]">
            <div class="w-full h-1 bg-stone-200 dark:bg-stone-800">
                <div id="ob-progress" class="h-full bg-primary transition-all duration-500" style="width: 25%"></div>
            </div>
            
            <div class="p-8 overflow-y-auto">
                
                <div id="ob-step-1" class="step-content space-y-6 transition-all duration-300">
                    <div class="w-16 h-16 bg-stone-100 dark:bg-stone-800 rounded-full flex items-center justify-center mx-auto mb-4 border border-stone-200 dark:border-stone-700 shadow-lg">
                        <span class="text-3xl">üëã</span>
                    </div>
                    <h2 class="text-2xl font-black text-stone-900 dark:text-white uppercase tracking-tighter">V√≠tej v Zelix</h2>
                    <p class="text-stone-500 dark:text-stone-400 text-sm">Tv≈Øj nov√Ω operaƒçn√≠ syst√©m pro tr√©nink.</p>
                    <input type="text" id="ob-name" class="w-full bg-stone-50 dark:bg-stone-800 border border-stone-300 dark:border-stone-700 text-stone-900 dark:text-white text-center font-bold text-xl py-4 rounded-xl focus:border-primary focus:outline-none placeholder-stone-400 dark:placeholder-stone-600 transition-colors" placeholder="Tv√© Jm√©no">
                    <button onclick="UI.nextOnboardingStep(2)" class="w-full bg-primary hover:bg-red-700 text-white font-black py-4 rounded-xl uppercase tracking-widest shadow-lg transition-transform active:scale-95">Potvrdit</button>
                </div>

                <div id="ob-step-2" class="step-content space-y-4 hidden opacity-0 translate-x-10">
                    <h2 class="text-xl font-black text-stone-900 dark:text-white uppercase">C√≠l Mise?</h2>
                    <p class="text-stone-500 dark:text-stone-400 text-sm">Uprav√≠m tr√©ninkov√© parametry podle toho, na co c√≠l√≠≈°.</p>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="UI.selectGoal('strength', this)" class="goal-btn p-4 bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl hover:border-stone-400 dark:hover:border-white transition-all group">
                            <div class="text-2xl mb-2">üêÇ</div>
                            <div class="font-bold text-stone-800 dark:text-white text-sm group-hover:text-primary">S√çLA</div>
                            <div class="text-[9px] text-stone-500 mt-1">N√≠zk√° opakov√°n√≠, tƒõ≈æk√© v√°hy.</div>
                        </button>
                        <button onclick="UI.selectGoal('hypertrophy', this)" class="goal-btn p-4 bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl hover:border-stone-400 dark:hover:border-white transition-all group border-primary ring-1 ring-primary"> 
                            <div class="text-2xl mb-2">ü¶ç</div>
                            <div class="font-bold text-stone-800 dark:text-white text-sm group-hover:text-primary">OBJEM</div>
                            <div class="text-[9px] text-stone-500 mt-1">Klasick√Ω bodybuilding (8-12 reps).</div>
                        </button>
                        <button onclick="UI.selectGoal('endurance', this)" class="goal-btn p-4 bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl hover:border-stone-400 dark:hover:border-white transition-all group">
                            <div class="text-2xl mb-2">üèÉ</div>
                            <div class="font-bold text-stone-800 dark:text-white text-sm group-hover:text-primary">KONDICE</div>
                            <div class="text-[9px] text-stone-500 mt-1">Vysok√° opakov√°n√≠, supers√©rie.</div>
                        </button>
                        <button onclick="UI.selectGoal('explosive', this)" class="goal-btn p-4 bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl hover:border-stone-400 dark:hover:border-white transition-all group">
                            <div class="text-2xl mb-2">üß®</div>
                            <div class="font-bold text-stone-800 dark:text-white text-sm group-hover:text-primary">V√ùBU≈†NOST</div>
                            <div class="text-[9px] text-stone-500 mt-1">Atletika, dynamika.</div>
                        </button>
                    </div>
                    <input type="hidden" id="ob-goal" value="hypertrophy">
                    <button onclick="UI.nextOnboardingStep(3)" class="w-full bg-stone-200 hover:bg-stone-300 dark:bg-stone-100 dark:hover:bg-white text-stone-900 font-bold py-3 rounded-xl uppercase tracking-widest mt-4">Dal≈°√≠</button>
                </div>

                <div id="ob-step-3" class="step-content space-y-4 hidden opacity-0 translate-x-10">
                    <h2 class="text-xl font-black text-stone-900 dark:text-white uppercase">Kalibrace (Voliteln√©)</h2>
                    <p class="text-stone-500 dark:text-stone-400 text-sm">Zn√°≈° sv√° maxima (1RM)? Zadej je, a≈• m≈Ø≈æu poƒç√≠tat rekordy.</p>
                    
                    <div class="space-y-3">
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-stone-400 font-bold text-xs uppercase">Bench Press</span>
                            <input type="number" id="ob-pr-bench" class="w-full bg-stone-50 dark:bg-stone-800 border border-stone-300 dark:border-stone-700 text-stone-900 dark:text-white text-right font-bold py-3 px-4 rounded-xl focus:border-primary focus:outline-none placeholder-stone-300 dark:placeholder-stone-600" placeholder="0">
                            <span class="absolute right-2 top-5 text-stone-400 text-xs">kg</span>
                        </div>
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-stone-400 font-bold text-xs uppercase">D≈ôep / Squat</span>
                            <input type="number" id="ob-pr-squat" class="w-full bg-stone-50 dark:bg-stone-800 border border-stone-300 dark:border-stone-700 text-stone-900 dark:text-white text-right font-bold py-3 px-4 rounded-xl focus:border-primary focus:outline-none placeholder-stone-300 dark:placeholder-stone-600" placeholder="0">
                            <span class="absolute right-2 top-5 text-stone-400 text-xs">kg</span>
                        </div>
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-stone-400 font-bold text-xs uppercase">Mrtv√Ω tah</span>
                            <input type="number" id="ob-pr-dl" class="w-full bg-stone-50 dark:bg-stone-800 border border-stone-300 dark:border-stone-700 text-stone-900 dark:text-white text-right font-bold py-3 px-4 rounded-xl focus:border-primary focus:outline-none placeholder-stone-300 dark:placeholder-stone-600" placeholder="0">
                            <span class="absolute right-2 top-5 text-stone-400 text-xs">kg</span>
                        </div>
                    </div>
                    <button onclick="UI.nextOnboardingStep(4)" class="w-full bg-stone-200 hover:bg-stone-300 dark:bg-stone-100 dark:hover:bg-white text-stone-900 font-bold py-3 rounded-xl uppercase tracking-widest mt-4">Ulo≈æit & Dal≈°√≠</button>
                    <button onclick="UI.nextOnboardingStep(4)" class="w-full text-stone-400 hover:text-stone-600 dark:hover:text-white font-bold text-xs uppercase py-2 transition-colors">Nev√≠m / P≈ôeskoƒçit</button>
                </div>

                <div id="ob-step-4" class="step-content space-y-6 hidden opacity-0 translate-x-10">
                    <h2 class="text-xl font-black text-stone-900 dark:text-white uppercase">Fin√°le: Rozvrh</h2>
                    <p class="text-stone-500 dark:text-stone-400 text-sm">Kdy chce≈° makat?</p>
                    
                    <div class="grid grid-cols-1 gap-2">
                        <button onclick="UI.finishOnboarding(3)" class="p-3 bg-stone-50 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 border border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-white rounded-xl text-left group transition-all flex items-center justify-between">
                            <div><div class="font-bold text-stone-900 dark:text-white group-hover:text-primary">3x T√Ωdnƒõ (Start)</div><div class="text-[9px] text-stone-500">Po ‚Ä¢ St ‚Ä¢ P√°</div></div>
                            <span class="text-2xl opacity-50 grayscale group-hover:grayscale-0">ü•â</span>
                        </button>
                        <button onclick="UI.finishOnboarding(4)" class="p-3 bg-stone-50 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 border border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-white rounded-xl text-left group transition-all flex items-center justify-between">
                            <div><div class="font-bold text-stone-900 dark:text-white group-hover:text-primary">4x T√Ωdnƒõ (Klasika)</div><div class="text-[9px] text-stone-500">Po ‚Ä¢ √öt ‚Ä¢ ƒåt ‚Ä¢ P√°</div></div>
                            <span class="text-2xl opacity-50 grayscale group-hover:grayscale-0">ü•à</span>
                        </button>
                        <button onclick="UI.finishOnboarding(5)" class="p-3 bg-stone-50 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 border border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-white rounded-xl text-left group transition-all flex items-center justify-between">
                            <div><div class="font-bold text-stone-900 dark:text-white group-hover:text-primary">5x T√Ωdnƒõ (Grind)</div><div class="text-[9px] text-stone-500">Po-P√° (V√≠kend volno)</div></div>
                            <span class="text-2xl opacity-50 grayscale group-hover:grayscale-0">ü•á</span>
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <!-- Utils -->
    <div id="wipe-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[300] bg-black/95 opacity-0 pointer-events-none"><div class="w-11/12 max-w-sm bg-white dark:bg-panel p-6 rounded-xl text-center border border-red-500 shadow-2xl"><h2 class="text-xl font-bold mb-4 uppercase text-red-600">Smazat v≈°e?</h2><div class="flex gap-2"><button onclick="UI.closeWipeModal()" class="flex-1 py-3 bg-stone-200 dark:bg-stone-800 rounded text-xs font-bold uppercase">Zpƒõt</button><button onclick="Data.hardReset()" class="flex-1 py-3 bg-red-600 text-white rounded text-xs font-bold uppercase">Smazat</button></div></div></div>
    <div id="duplicate-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[250] bg-black/80 opacity-0 pointer-events-none"><div class="bg-white dark:bg-panel p-6 rounded-xl max-w-sm text-center border border-primary/50 shadow-2xl"><h3 class="font-bold mb-4 uppercase text-stone-900 dark:text-white">Dnes ji≈æ tr√©nov√°no</h3><div class="flex gap-2"><button onclick="UI.closeDuplicateModal()" class="flex-1 py-3 bg-stone-200 dark:bg-stone-800 rounded text-xs font-bold uppercase">Zru≈°it</button><button onclick="Logic.forceOpenWorkout()" class="flex-1 py-3 bg-primary text-white rounded text-xs font-bold uppercase">P≈ôidat</button></div></div></div>
    <div id="weight-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[250] bg-black/80 opacity-0 pointer-events-none">
    <div class="bg-white dark:bg-panel p-6 rounded-xl max-w-sm w-11/12 text-center border border-stone-200 dark:border-stone-700 shadow-2xl">
        <h3 class="font-black mb-4 uppercase text-stone-900 dark:text-white text-lg">Zadat v√°hu</h3>
        <div class="relative w-24 mx-auto mb-6">
            <input type="number" id="new-bodyweight" step="0.1" class="z-input text-center font-bold text-2xl p-2" placeholder="00.0">
            <span class="absolute right-[-20px] bottom-3 text-stone-400 font-bold text-xs">kg</span>
        </div>
        <div class="flex gap-2">
            <button onclick="UI.closeWeightModal()" class="flex-1 py-3 bg-stone-200 dark:bg-stone-800 rounded text-xs font-bold uppercase transition-colors hover:bg-stone-300 dark:hover:bg-stone-700">Zru≈°it</button>
            <button onclick="Logic.saveBodyweight()" class="flex-1 py-3 bg-primary text-white rounded text-xs font-bold uppercase shadow-lg hover:bg-red-700 transition-colors">Ulo≈æit</button>
        </div>
    </div>
</div>
    
    <div id="success-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[500] bg-black/90 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="w-11/12 max-w-sm bg-white dark:bg-panel p-6 rounded-xl text-center border border-primary/50 shadow-2xl relative overflow-hidden transform transition-all scale-95" id="success-modal-content">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-primary"></div>
            
            <div class="mb-4 text-primary text-4xl animate-bounce mt-2">‚úÖ</div>
            
            <h2 id="success-title" class="text-xl font-black mb-2 uppercase text-stone-900 dark:text-white tracking-tighter">Mise Zah√°jena</h2>
            
            <p id="success-msg" class="text-sm text-stone-500 dark:text-stone-300 mb-8 leading-relaxed">
                Pl√°n nahr√°n do syst√©mu.
            </p>
            
            <button onclick="UI.closeSuccessModal()" class="w-full py-3.5 bg-primary hover:bg-red-700 text-white font-bold rounded-lg uppercase shadow-lg tracking-widest transition-transform active:scale-95">
                Rozum√≠m
            </button>
        </div>
    </div>
    
    <div id="session-delete-modal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-[260] bg-black/95 opacity-0 pointer-events-none"><div class="w-11/12 max-w-sm bg-white dark:bg-panel p-6 rounded-xl text-center border border-red-500 shadow-2xl"><h2 class="text-xl font-bold mb-4 uppercase text-red-600">Smazat tr√©nink?</h2><p id="del-session-date" class="text-sm opacity-70 mb-6 font-mono font-bold">...</p><div class="flex gap-2"><button onclick="UI.closeSessionDeleteModal()" class="flex-1 py-3 bg-stone-200 dark:bg-stone-800 rounded text-xs font-bold uppercase">Zpƒõt</button><button onclick="Logic.executeSessionDelete()" class="flex-1 py-3 bg-red-600 text-white rounded text-xs font-bold uppercase">Smazat</button></div></div></div>

    <!-- LOAD SCRIPTS -->
    <script src="config.js"></script>
    <script src="data.js"></script>
    <script src="logic.js"></script>
    <script src="ui.js"></script>
    <script>
        window.onload = function() {
            Data.init();
        }
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('Zelix PWA: Service Worker Registered'))
                .catch((err) => console.log('Zelix PWA: Registration Failed', err));
        }
    </script>
</body>
</html>






















